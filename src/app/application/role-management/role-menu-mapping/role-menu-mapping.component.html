<p-card class="shadow-3 border-round-lg">
  <p-toast></p-toast>

  <!-- Role Selection -->
  <div class="grid mb-3">
    <div class="col-12 md:col-4">
      <label class="block mb-2 font-medium">Select Role</label>
      <p-dropdown [options]="roles" [(ngModel)]="selectedRole" placeholder="Choose a Role" class="w-full">
      </p-dropdown>
    </div>
  </div>

<!-- Menu Grid -->
<div class="role-grid-wrapper mt-3" *ngIf="menuGridRows.length; else noData">
  <table class="role-grid">
    <thead>
      <tr>
        <th>Menu</th>
        <th>Sub-Menu</th>
        <th class="text-center">All Privileges</th>
        <th>Individual Privileges</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of menuGridRows">
        <td class="menu-name">{{ row.menuName }}</td>
        <td class="submenu-name">{{ row.subMenuName }}</td>
        <td class="text-center">
          <p-checkbox
            [binary]="true"
            [ngModel]="isSubMenuFullySelected(row)"
            [indeterminate]="isSubMenuPartiallySelected(row)"
            (onChange)="toggleSubMenu(row, $event.checked)">
          </p-checkbox>
        </td>
        <td>
          <div class="privilege-pills">
            <label class="privilege-pill" *ngFor="let privilege of row.privileges">
              <p-checkbox
                [binary]="true"
                [ngModel]="isPrivilegeSelected(row.subMenuId, privilege.privilegeId)"
                (onChange)="togglePrivilege(row.subMenuId, privilege.privilegeId, $event.checked)">
              </p-checkbox>
              <span>{{ privilege.privilegeName }}</span>
            </label>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #noData>
  <div class="surface-100 border-round-lg p-4 text-center text-500">
    No menu definitions available.
  </div>
</ng-template>

  <!-- Actions -->
  <div class="flex justify-content-end gap-3 mt-4">
    <button pButton label="Cancel" class="p-button-secondary"></button>
    <button pButton label="Assign" class="p-button-success" (click)="submit()"></button>
  </div>
</p-card>
